<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Upload Student Feedback CSV</title>
    <style>
      :root {
        color-scheme: light;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: 'Segoe UI', Tahoma, sans-serif;
        background: linear-gradient(135deg, #eef2ff, #f7fafc 45%, #f0fff4);
        color: #1f2933;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem 1.5rem;
      }

      .shell {
        width: min(880px, 100%);
        background: rgba(255, 255, 255, 0.92);
        border-radius: 22px;
        box-shadow: 0 25px 70px rgba(15, 23, 42, 0.12);
        padding: clamp(2rem, 3vw + 1rem, 3.5rem);
      }

      header {
        display: flex;
        flex-direction: column;
        gap: 0.35rem;
        margin-bottom: 2rem;
      }

      header span {
        font-size: 0.9rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: #64748b;
        font-weight: 600;
      }

      h1 {
        margin: 0;
        font-size: clamp(2rem, 3vw + 1rem, 2.75rem);
        color: #1e293b;
      }

      p.lead {
        margin: 0;
        color: #475569;
        font-size: 1.05rem;
      }

      form {
        margin-top: 2.5rem;
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .file-input {
        border: 2px dashed #94a3b8;
        border-radius: 16px;
        padding: 2.25rem 1.75rem;
        background: rgba(226, 232, 240, 0.35);
        text-align: center;
        transition: border-color 0.2s ease, background 0.2s ease;
      }

      .file-input:hover {
        border-color: #6366f1;
        background: rgba(226, 232, 240, 0.55);
      }

      .file-input label {
        display: inline-flex;
        align-items: center;
        gap: 0.65rem;
        font-weight: 600;
        color: #334155;
        cursor: pointer;
      }

      .file-input label span {
        padding: 0.65rem 1.15rem;
        border-radius: 999px;
        background: rgba(99, 102, 241, 0.12);
        color: #4338ca;
        font-size: 0.9rem;
      }

      input[type='file'] {
        display: none;
      }

      .helper {
        color: #64748b;
        font-size: 0.95rem;
        margin-top: 0.75rem;
      }

      .selected-file {
        margin-top: 0.6rem;
        font-size: 0.95rem;
        color: #1e293b;
        font-weight: 600;
        display: none;
      }

      .selected-file.active {
        display: block;
      }

      button {
        align-self: center;
        padding: 0.85rem 1.9rem;
        border: none;
        border-radius: 999px;
        font-size: 1rem;
        font-weight: 600;
        background: linear-gradient(120deg, #4f46e5, #5eead4);
        color: #fff;
        cursor: pointer;
        box-shadow: 0 12px 25px rgba(79, 70, 229, 0.25);
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 16px 35px rgba(79, 70, 229, 0.35);
      }

      ul.tips {
        margin: 0;
        margin-top: 2.25rem;
        padding-left: 1.25rem;
        display: grid;
        gap: 0.55rem;
        color: #475569;
      }

      ul.tips li strong {
        color: #1e293b;
      }

      footer {
        margin-top: 2.75rem;
        font-size: 0.85rem;
        color: #8593a6;
      }

      @media (max-width: 640px) {
        body {
          padding: 1.5rem 1rem;
        }

        .shell {
          padding: 2rem;
        }

        form {
          gap: 1.25rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <header>
        <span>QNLP student insights</span>
        <h1>Upload feedback to begin the analysis</h1>
        <p class="lead">Share a CSV export of student responses to discover sentiment trends across teachers, facilities, and more.</p>
      </header>

      <form method="post" action="/upload" enctype="multipart/form-data">
        <div class="file-input">
          <label for="feedback-file">
            <span>Choose CSV</span>
            Drag &amp; drop or browse your file
          </label>
          <input id="feedback-file" type="file" name="file" accept=".csv" required>
          <div class="helper">Supported format: UTF-8 CSV with column headers.</div>
          <div id="selected-file" class="selected-file" aria-live="polite"></div>
        </div>

        <button type="submit">Run analysis</button>
      </form>

      <ul class="tips">
        <li><strong>Required column:</strong> a feedback text column (commonly labelled “Teacher Feedback” or “Comments”).</li>
        <li><strong>Optional columns:</strong> sentiment label (positive/negative), teacher, facility, branch, department.</li>
        <li>We automatically detect the best matching columns — you can refine them before processing if needed.</li>
      </ul>

      <footer>
        Need a sample? Try <em>data/student_feedback_full.csv</em> from the repository,
        or <a href="/static/samples/google_forms_template.csv" download>download the Google Forms CSV template</a>.
      </footer>
    </div>
    <script>
      const fileInput = document.getElementById('feedback-file');
      const selectedFile = document.getElementById('selected-file');

      if (fileInput && selectedFile) {
        fileInput.addEventListener('change', (event) => {
          const files = event.target.files;
          if (files && files.length > 0) {
            selectedFile.textContent = `Selected file: ${files[0].name}`;
            selectedFile.classList.add('active');
          } else {
            selectedFile.textContent = '';
            selectedFile.classList.remove('active');
          }
        });
      }
    </script>
  </body>
</html>