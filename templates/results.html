<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Results</title>
  </head>
  <body>
    <h1>Results</h1>
    <p>Total rows: {{ total }}</p>
    <p>Positive (predicted): {{ positive }}</p>
    <p>Negative (predicted): {{ negative }}</p>
    {% if metrics %}
    <h2>Evaluation metrics</h2>
    <ul>
      <li>Accuracy: {{ '%.3f'|format(metrics.accuracy) }}</li>
      <li>Precision: {{ '%.3f'|format(metrics.precision) }}</li>
      <li>Recall: {{ '%.3f'|format(metrics.recall) }}</li>
      <li>F1: {{ '%.3f'|format(metrics.f1) }}</li>
    </ul>
    <h3>Confusion matrix</h3>
    <pre>{{ metrics.confusion_matrix }}</pre>
    {% elif accuracy is not none %}
    <p>Training accuracy (on provided labels): {{ '%.3f'|format(accuracy) }}</p>
    {% endif %}
  {% if agg.teacher_overall_plot %}
  <h2>Teacher performance (overall)</h2>
  <iframe src="/static/generated/{{ agg.teacher_overall_plot }}" width="400" height="400" style="border:0"></iframe>
  {% endif %}
  {% if agg.facility_overall_plot %}
  <h2>Facility performance (overall)</h2>
  <iframe src="/static/generated/{{ agg.facility_overall_plot }}" width="400" height="400" style="border:0"></iframe>
  {% endif %}
  {% if agg.category_plot %}
  <h2>Category scores</h2>
  <iframe src="/static/generated/{{ agg.category_plot }}" width="100%" height="400"></iframe>
  {% endif %}
  {% if agg.branch_plot %}
  <h2>Branch performance</h2>
  <iframe src="/static/generated/{{ agg.branch_plot }}" width="100%" height="400"></iframe>
  {% endif %}
  {% if agg.department_plot %}
  <h2>Department performance</h2>
  <iframe src="/static/generated/{{ agg.department_plot }}" width="100%" height="400"></iframe>
  {% endif %}

  {% if saved_model_path %}
  <h2>Saved model</h2>
  <p>Model saved to: <a href="/{{ saved_model_path }}">{{ saved_model_path }}</a></p>
  {% endif %}
    <p><a href="/">Upload another file</a></p>
  </body>
</html>